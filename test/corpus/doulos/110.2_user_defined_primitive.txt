============================================
doulos/110.2_user_defined_primitive
============================================

// Section 110.2: User Defined Primitive

primitive Latch (Q, D, Ena);
  output Q;
  input D, Ena;

  reg Q;                             // Level sensitive UDP

  table
//  D Ena : old Q : Q
    0 0   :   ?   : 0;
    1 0   :   ?   : 1;
    ? 1   :   ?   : -;               // Keeps previous value
    0 ?   :   0   : 0;
    1 ?   :   1   : 1;
  endtable

endprimitive



----

(source_file
  (comment)
  (module_or_generate_item
    (module_instantiation
      instance_type: (simple_identifier)
      (hierarchical_instance
        (name_of_instance
          instance_name: (instance_identifier
            (simple_identifier)))
        (list_of_port_connections
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))))))
  (port_declaration
    (output_declaration
      (list_of_port_identifiers
        (port_identifier
          (simple_identifier)))))
  (port_declaration
    (input_declaration
      (list_of_port_identifiers
        (port_identifier
          (simple_identifier))
        (port_identifier
          (simple_identifier)))))
  (package_or_generate_item_declaration
    (data_declaration
      (data_type_or_implicit1
        (data_type
          (integer_vector_type)))
      (list_of_variable_decl_assignments
        (variable_decl_assignment
          (simple_identifier)))))
  (comment)
  (statement_or_null
    (statement
      (statement_item
        (subroutine_call_statement
          (subroutine_call
            (tf_call
              (hierarchical_identifier
                (simple_identifier))))
          (comment)
          (ERROR
            (primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number))))))))))
  (ERROR
    (primary
      (primary_literal
        (integral_number
          (decimal_number
            (unsigned_number)))))
    (ERROR
      (unsigned_number)
      (comment)))
  (statement_or_null)
  (port_declaration
    (interface_port_declaration
      (interface_identifier
        (simple_identifier))
      (list_of_interface_identifiers
        (interface_identifier
          (simple_identifier))))))

(ERROR)
