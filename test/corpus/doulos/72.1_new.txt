============================================
doulos/72.1_new
============================================

// Section 72.1: New

class C;
  bit [3:0] size;

  covergroup cov_size;
    coverpoint size;
  endgroup

  function new(input j = 0);    // Class constructor
    size = j;
    cov_size = new;             // Covergroup instance
  endfunction
endclass

C c1, c2, c3;
C c4 = new;                     // Declare and initialize

module foo;
initial begin
  c1 = new;                     // Size = 0
  c2 = new(10);                 // Size = 10
  c3 = new c2;                  // Size = 10
  /*...*/
  repeat (20) begin
    c2.size = $urandom_range(0, 15);
    c2.cov_size.sample();
  end
  /*...*/
end
endmodule


----

(source_file
  (comment)
  (ERROR
    (simple_identifier)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (integer_vector_type)
              (packed_dimension
                (constant_range
                  (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number))))))
                  (constant_expression
                    (constant_primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number))))))))))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (ERROR
                (simple_identifier)
                (simple_identifier))
              (expression
                (primary
                  (primary_literal
                    (integral_number
                      (decimal_number
                        (unsigned_number))))))))
          (ERROR))))
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (ERROR)
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (class_new))))))
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))
            (variable_decl_assignment
              (simple_identifier))
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (class_new))))))
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (ERROR
                (simple_identifier))
              (class_new))))))
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (class_new
                (list_of_arguments
                  (expression
                    (primary
                      (primary_literal
                        (integral_number
                          (decimal_number
                            (unsigned_number)))))))))))))
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (class_new
                (expression
                  (primary
                    (hierarchical_identifier
                      (simple_identifier))))))))))
    (comment)
    (comment)
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (ERROR
            (unsigned_number)
            (simple_identifier))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)
              (expression
                (primary
                  (function_subroutine_call
                    (subroutine_call
                      (system_tf_call
                        (system_tf_identifier)
                        (list_of_arguments
                          (expression
                            (primary
                              (primary_literal
                                (integral_number
                                  (decimal_number
                                    (unsigned_number))))))
                          (expression
                            (primary
                              (primary_literal
                                (integral_number
                                  (decimal_number
                                    (unsigned_number)))))))))))))))))
    (class_item
      (class_property
        (data_declaration
          (data_type_or_implicit1
            (data_type
              (simple_identifier)))
          (ERROR
            (simple_identifier))
          (list_of_variable_decl_assignments
            (variable_decl_assignment
              (simple_identifier)))
          (ERROR))))
    (data_type_or_implicit1
      (data_type
        (simple_identifier)))
    (comment)
    (simple_identifier)
    (simple_identifier)))

(ERROR)
