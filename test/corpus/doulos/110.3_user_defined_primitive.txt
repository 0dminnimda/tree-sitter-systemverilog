============================================
doulos/110.3_user_defined_primitive
============================================

// Section 110.3: User Defined Primitive

primitive DFF (Q, Clk, D);
  output Q;
  input Clk, D;

  reg Q;                             // Edge sensitive UDP

  initial
    Q = 1;

  table
//  Clk  D  : old Q : Q
     r   0  :   ?   : 0;      // Clock '0'
     r   1  :   ?   : 1;      // Clock '1'
    (0?) 0  :   0   : -;      // Possible Clock
    (0?) 1  :   1   : -;      //    "           "
    (?1) 0  :   0   : -;      //    "           "
    (?1) 1  :   1   : -;      //    "           "
    (?0) ?  :   ?   : -;      // Ignore falling clock
    (1?) ?  :   ?   : -;      //   "   "    "
     ?   *  :   ?   : -;      // Ignore D changes on steady clock
  endtable

endprimitive



----

(ERROR
  (comment)
  (module_or_generate_item
    (module_instantiation
      instance_type: (simple_identifier)
      (hierarchical_instance
        (name_of_instance
          instance_name: (instance_identifier
            (simple_identifier)))
        (list_of_port_connections
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))
          (ordered_port_connection
            (expression
              (primary
                (hierarchical_identifier
                  (simple_identifier)))))))))
  (port_declaration
    (output_declaration
      (list_of_port_identifiers
        (port_identifier
          (simple_identifier)))))
  (port_declaration
    (input_declaration
      (list_of_port_identifiers
        (port_identifier
          (simple_identifier))
        (port_identifier
          (simple_identifier)))))
  (package_or_generate_item_declaration
    (data_declaration
      (data_type_or_implicit1
        (data_type
          (integer_vector_type)))
      (list_of_variable_decl_assignments
        (variable_decl_assignment
          (simple_identifier)))))
  (comment)
  (module_or_generate_item
    (initial_construct
      (statement_or_null
        (statement
          (statement_item
            (blocking_assignment
              (operator_assignment
                (variable_lvalue
                  (hierarchical_identifier
                    (simple_identifier)))
                (assignment_operator)
                (expression
                  (primary
                    (primary_literal
                      (integral_number
                        (decimal_number
                          (unsigned_number)))))))))))))
  (statement_or_null
    (statement
      (statement_item
        (subroutine_call_statement
          (subroutine_call
            (tf_call
              (hierarchical_identifier
                (simple_identifier))))
          (comment)
          (ERROR
            (simple_identifier)
            (unsigned_number)
            (primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number))))))))))
  (comment)
  (statement_or_null
    (statement
      (statement_item
        (subroutine_call_statement
          (subroutine_call
            (tf_call
              (hierarchical_identifier
                (simple_identifier))))
          (ERROR
            (unsigned_number)
            (primary
              (primary_literal
                (integral_number
                  (decimal_number
                    (unsigned_number))))))))))
  (comment)
  (cond_predicate
    (expression
      (primary
        (primary_literal
          (integral_number
            (decimal_number
              (unsigned_number)))))))
  (ERROR)
  (unary_operator)
  (ERROR)
  (comment)
  (cond_predicate
    (expression
      (primary
        (primary_literal
          (integral_number
            (decimal_number
              (unsigned_number)))))))
  (ERROR)
  (unary_operator)
  (ERROR)
  (comment)
  (ERROR)
  (unary_operator)
  (ERROR)
  (comment)
  (ERROR)
  (unary_operator)
  (ERROR)
  (comment)
  (ERROR)
  (unary_operator)
  (ERROR)
  (comment)
  (cond_predicate
    (expression
      (primary
        (primary_literal
          (integral_number
            (decimal_number
              (unsigned_number)))))))
  (ERROR
    (ERROR)
    (unary_operator))
  (comment)
  (ERROR)
  (cond_predicate
    (expression
      (unary_operator)
      (ERROR)
      (comment)
      (primary
        (hierarchical_identifier
          (simple_identifier)))))
  (simple_identifier))

(ERROR)
